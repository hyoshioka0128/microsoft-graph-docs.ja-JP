# <a name="use-the-activity-feed-rest-api"></a><span data-ttu-id="cf46d-101">アクティビティ フィード REST API を使用する</span><span class="sxs-lookup"><span data-stu-id="cf46d-101">Use the activity feed REST API</span></span>

<span data-ttu-id="cf46d-102">Microsoft Graph のアクティビティ フィード API を使用して、デバイスやプラットフォームをまたいでユーザーのアクティビティを再開できます。</span><span class="sxs-lookup"><span data-stu-id="cf46d-102">You can use the activity feed API in Microsoft Graph to resume a user's actiity across devices and platforms.</span></span> <span data-ttu-id="cf46d-103">アクティビティ フィード API 要求は、[委任されたアクセス許可](../../../concepts/permissions_reference.md#delegated-permissions-application-permissions-and-effective-permissions)と[ユーザー アクティビティのアクセス許可](../../../concepts/permissions_reference.md)、個人または仕事や学校のアカウントを使用できるユーザーの代わりに実行されます。</span><span class="sxs-lookup"><span data-stu-id="cf46d-103">Activity feed API requests are performed on behalf of a user via [delegated permissions](../../../concepts/permissions_reference.md#delegated-permissions-application-permissions-and-effective-permissions) and the [user activity permission](../../../concepts/permissions_reference.md), which can be used with either personal or work and school accounts.</span></span> 

<span data-ttu-id="cf46d-104">ユーザー アクティビティは、[アクティビティ](https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/projectrome_activity)リソースにより示され、collection me/activities により示される時間ベースのフィードとして整理されます。</span><span class="sxs-lookup"><span data-stu-id="cf46d-104">User activities are represented by the [activity](https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/projectrome_activity) resource and are organized in a time-based feed represented by the collection me/activities.</span></span> 
<!-- Add missing content.
Each activity represents a unique... 
-->
## <a name="what-makes-a-great-user-activity"></a><span data-ttu-id="cf46d-105">優れたユーザー アクティビティとは</span><span class="sxs-lookup"><span data-stu-id="cf46d-105">What makes a great user activity?</span></span>

<span data-ttu-id="cf46d-106">ユーザー アクティビティは、アプリを起動するだけではなく、アプリ内の特定のコンテンツに密接にリンクしています。</span><span class="sxs-lookup"><span data-stu-id="cf46d-106">User activities don’t just launch apps — they are deep links into specific content within your app.</span></span> <span data-ttu-id="cf46d-107">作成したユーザー アクティビティを自分のアプリで使用することができるだけでなく、Cortana と Windows のタイムラインにも表示されることにより、アプリの再接続が増え、ユーザーが複数のデバイスでアプリを使用することが容易になります。</span><span class="sxs-lookup"><span data-stu-id="cf46d-107">The user activities you create can not only be used in your own app, but will also appear in Cortana and Windows Timeline — driving more app reengagement and making it easier for your users to continue using your app across multiple devices.</span></span>  

### <a name="what-should-become-an-activity"></a><span data-ttu-id="cf46d-108">何がアクティビティになりますか</span><span class="sxs-lookup"><span data-stu-id="cf46d-108">What should become an activity?</span></span> 

<span data-ttu-id="cf46d-109">すべてのアプリケーションは異なるため、各アプリケーション開発者は、アプリケーション内の操作をユーザー アクティビティにマップする最適な方法を理解する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cf46d-109">Because every app is different, it's up to each app developer to understand the best way to map actions within your application to user activities.</span></span> <span data-ttu-id="cf46d-110">たとえば、ゲームでは、キャンペーンごとのアクティビティ、ドキュメント作成アプリではドキュメント固有のアクティビティ、基幹業務アプリケーションではワークフローごとのアクティビティがそれぞれ作成される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="cf46d-110">For example, games might create an activity for each campaign, document authoring apps might create an activity for each unique document, and line-of-business apps might create an activity for each workflow.</span></span> 

<span data-ttu-id="cf46d-111">アプリでアクティビティを定義する場合は、次のガイドラインを適用します。</span><span class="sxs-lookup"><span data-stu-id="cf46d-111">Apply the following guidlines as you define activitites in your app:</span></span>

<span data-ttu-id="cf46d-112">**行うこと:** 関連するユーザー操作のグループに対して 1 つのアクティビティを記録します。</span><span class="sxs-lookup"><span data-stu-id="cf46d-112">**DO:** Record a single activity for a group of related user actions.</span></span> <span data-ttu-id="cf46d-113">一連の関連コンテンツにアプリケーションを使用している場合は、エンゲージメント セション全体で  1 つのアクティビティを記録することが適切です。</span><span class="sxs-lookup"><span data-stu-id="cf46d-113">If your application is used for a sequence of related content, it probably makes sense to record a single activity for the entire engagement session.</span></span>  

<span data-ttu-id="cf46d-114">*プレイリストのシナリオ:* これは特に音楽プレイリストやテレビ番組に関係するものであり、単一のユーザー アクティビティを更新して進行状況を示すことができます。</span><span class="sxs-lookup"><span data-stu-id="cf46d-114">*Playlist scenarios:* This is especially relevant for music playlists or TV shows — a single user activity can be updated to show your progress.</span></span> <span data-ttu-id="cf46d-115">この例では、複数の日や数週間にわたるエンゲージメント期間を示す複数の[履歴項目](https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/projectrome_historyitem)を含む単一のユーザー アクティビティがあります。</span><span class="sxs-lookup"><span data-stu-id="cf46d-115">In this case, you will have a single user activity with multiple [history items](https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/projectrome_historyitem) representing periods of engagement across multiple days or weeks.</span></span>  

<span data-ttu-id="cf46d-116">**行うこと:** ユーザー データをクラウドに保存します。</span><span class="sxs-lookup"><span data-stu-id="cf46d-116">**DO:** Store user data to the cloud.</span></span> <span data-ttu-id="cf46d-117">デバイス間のアクティビティをサポートする場合は、アクティビティの再エンゲージに必要なコンテンツがクラウドに保存されていることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cf46d-117">If you want to support cross-device activities, you need to make sure the content required to reengage this activity is stored to a cloud location.</span></span> <span data-ttu-id="cf46d-118">たとえば、ユーザーがドキュメントを編集するたびにアクティビティを公開する場合、デバイス間での再エンゲージメントを可能にするためには、ドキュメントはユーザーのデバイス上にローカルに保存するのではなく、クラウドに保存する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cf46d-118">For example, if you publish an activity each time a user edits a document, the document should be stored in the cloud as opposed to locally on the user's device in order to enable cross-device reengagement.</span></span>  

<span data-ttu-id="cf46d-119">**行わないこと:** ユーザーが将来再開する必要のない操作のユーザー アクティビティを作成する。</span><span class="sxs-lookup"><span data-stu-id="cf46d-119">**DO NOT:** Create a user activity for actions that users do not need to resume in the future.</span></span> <span data-ttu-id="cf46d-120">アプリケーションを、将来的に追跡する状態を保持しない、単純に 1 回限りの操作を完了するために使用している場合は、ユーザー アクティビティを書く必要はおそらくありません。</span><span class="sxs-lookup"><span data-stu-id="cf46d-120">If your application is used to complete simple, one-time operations that do not persist status for you to track in the future, you probably do not need to write a user activity.</span></span> 

<span data-ttu-id="cf46d-121">ユーザー アクティビティが Windows のタイムラインに表示されるとしても、これはバージョン管理ツールとして設計されたものではありません。ドキュメント ベースのアクティビティを選択すると、そのドキュメントの最新バージョン (他のユーザーによる変更を含む) が常に表示されます。</span><span class="sxs-lookup"><span data-stu-id="cf46d-121">To be clear, even though user activities appear in Windows Timeline, this is not designed as a versioning tool — choosing a document-based activity should always show the latest version of that document (including changes that were made by another user.)</span></span>

<span data-ttu-id="cf46d-122">**行わないこと:** *他のユーザー*が完了したアクションのユーザー アクティビティを作成します。</span><span class="sxs-lookup"><span data-stu-id="cf46d-122">**DO NOT:** Create a user activity for actions completed by *other users*.</span></span> <span data-ttu-id="cf46d-123">ユーザーがメッセージを受信したり、アプリ内でユーザーが @mentions される場合は、新しいアクティビティを書くべきではありません。</span><span class="sxs-lookup"><span data-stu-id="cf46d-123">If someone sends the user a message, or @mentions the user within your app, you should not write a new activity.</span></span> <span data-ttu-id="cf46d-124">このような場合は、通知を表示するとより効果があります。</span><span class="sxs-lookup"><span data-stu-id="cf46d-124">These interactions are better served by surfacing notifications.</span></span>  

<span data-ttu-id="cf46d-125">*コラボレーションのシナリオ:* 複数のユーザーが同じアクティビティ (Word ドキュメントなど) の作業をしている場合は、最後の編集の後に別のユーザーが変更を加えた可能性があります。</span><span class="sxs-lookup"><span data-stu-id="cf46d-125">*Collaboration scenarios:* If multiple people are working on the same activity (such as a Word document), there will be cases when another user has made changes to the document after you last edited it.</span></span> <span data-ttu-id="cf46d-126">この場合、アプリの開発者はアクティビティのビジュアル要素を更新して、ドキュメントに対する変更を反映したい場合があります。</span><span class="sxs-lookup"><span data-stu-id="cf46d-126">In this case, app developers might want to update the visual elements in the activity to reflect changes made to the document.</span></span> <span data-ttu-id="cf46d-127">そのために、アプリは新しい履歴項目を作成することなく既存のアクティビティを更新することがあります。</span><span class="sxs-lookup"><span data-stu-id="cf46d-127">To do this, the app might update the existing activity without creating a new history item.</span></span> 

><span data-ttu-id="cf46d-128">**注:** Web アプリケーションのアクティビティを公開する場合、アクティビティごとに `activationURL` と `fallbackURL` を含めることが重要です。</span><span class="sxs-lookup"><span data-stu-id="cf46d-128">**Note:** If you're publishing activities for a web application, it's important to include both an `activationURL` and a `fallbackURL` for each of your activities.</span></span> <span data-ttu-id="cf46d-129">このアクティビティにより、Windows タイムラインなどの Microsoft エクスペリエンスからアプリへとユーザーを戻すことができます。</span><span class="sxs-lookup"><span data-stu-id="cf46d-129">The activities will launch the user back into your app as expected from Microsoft experiences like Windows Timeline.</span></span> 

## <a name="app-interaction-patterns-and-user-activities"></a><span data-ttu-id="cf46d-130">アプリの相互作用パターンとユーザー アクティビティ</span><span class="sxs-lookup"><span data-stu-id="cf46d-130">App interaction patterns and user activities</span></span> 
<span data-ttu-id="cf46d-131">作成するユーザー アクティビティは、アプリの相互作用パターンに応じて異なります。</span><span class="sxs-lookup"><span data-stu-id="cf46d-131">The user activities that you create will vary based on the interaction pattern of your app.</span></span> <span data-ttu-id="cf46d-132">すべてのアプリケーションは異なりますが、ほとんどの場合、次の相互作用パターンのいずれかに分類されます。</span><span class="sxs-lookup"><span data-stu-id="cf46d-132">While every app is different, most will fall into one of the following interaction patterns:</span></span> 

* <span data-ttu-id="cf46d-133">**ドキュメント ベースのアプリケーション**  — 使用期間を反映する 1 つ以上の履歴レコードを使用して、ドキュメントごとに 1 つのアクティビティを作成します。</span><span class="sxs-lookup"><span data-stu-id="cf46d-133">**Document-based apps** — Create one activity per document with one or more history records reflecting periods of use.</span></span> <span data-ttu-id="cf46d-134">ドキュメントの変更に応じて、アクティビティ カードを更新することが重要です。</span><span class="sxs-lookup"><span data-stu-id="cf46d-134">It is important to update your activity card as changes are made to the document.</span></span> 
* <span data-ttu-id="cf46d-135">**メディア再生アプリ**  — プレイリスト、プログラム、またはスタンドアロン コンテンツなど、コンテンツの論理グループごとに 1 つのアクティビティを作成します。</span><span class="sxs-lookup"><span data-stu-id="cf46d-135">**Media playback apps** — Create one activity per logical grouping of content such as a playlist, program, or standalone content.</span></span> 
* <span data-ttu-id="cf46d-136">**ゲーム** — 保存したゲームや世界ごとに 1 つのアクティビティを作成します。</span><span class="sxs-lookup"><span data-stu-id="cf46d-136">**Games** — Create one activity for each saved game or world.</span></span> <span data-ttu-id="cf46d-137">レベルのシーケンスを 1 つしかサポートしていないゲームの場合は、最新の進行状況や達成状況を表示するためにカードを更新することもできますが、時間の経過とともに同じアクティビティを記述できます。</span><span class="sxs-lookup"><span data-stu-id="cf46d-137">If your game supports only a single sequence of levels, you can write the same activity over time, although you might want to update your card to show your latest progress or achievements.</span></span> 
* <span data-ttu-id="cf46d-138">**ユーティリティ アプリ** — アプリ内でユーザーが再開を望むことがない場合は、アクティビティを公開しないでください。</span><span class="sxs-lookup"><span data-stu-id="cf46d-138">**Utility apps** — If there is nothing within your app that users would want to resume, you should not publish activities.</span></span> <span data-ttu-id="cf46d-139">電卓のような単純な単目的アプリがその良い例です。</span><span class="sxs-lookup"><span data-stu-id="cf46d-139">A good example is a simple single-purpose app like calculator.</span></span> 
* <span data-ttu-id="cf46d-140">**基幹業務アプリ** — 単純なタスクやワークフローを管理する多くのアプリがあります。</span><span class="sxs-lookup"><span data-stu-id="cf46d-140">**Line-of-business apps** — Many apps exist for managing simple tasks or workflows.</span></span> <span data-ttu-id="cf46d-141">アプリを通じてアクセスするワークフローごとに 1 つのアクティビティを作成します。</span><span class="sxs-lookup"><span data-stu-id="cf46d-141">Create one activity for each separate workflow accessed through your app.</span></span> <span data-ttu-id="cf46d-142">たとえば、アクティビティをクリックして承認済みか確認するためには、各経費明細書を異なるアクティビティにします。</span><span class="sxs-lookup"><span data-stu-id="cf46d-142">For example, each expense report would be a separate activity, because you might want to click that activity to see if it was approved.</span></span>

<span data-ttu-id="cf46d-143">*複雑なアプリには、複数の相互作用パターンが含まれています。アプリで扱うさまざまなシナリオに対して、さまざまなユーザー アクティビティの作成パターンに従うことができます。*</span><span class="sxs-lookup"><span data-stu-id="cf46d-143">*Some complex apps include multiple interaction patterns. You might want to follow different user activity creation patterns for different scenarios handled by your app.*</span></span>

<!-- Add content or remove H2.
## Common use cases 
-->

## <a name="next-steps"></a><span data-ttu-id="cf46d-144">次の手順</span><span class="sxs-lookup"><span data-stu-id="cf46d-144">Next steps</span></span>

- <span data-ttu-id="cf46d-145">「[アクティビティ リソース](https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/projectrome_activity)」を参照し、ユーザーが重要なタスクを再開できるように、アプリのアクティビティを定義します。</span><span class="sxs-lookup"><span data-stu-id="cf46d-145">See the [activity resource](https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/projectrome_activity) and define your app's activities to help users resume important tasks.</span></span>
- <span data-ttu-id="cf46d-146">「[アダプティブ カードのサンプル](http://adaptivecards.io/samples/)」を見て、アクティビティを**ポップ**にするアイデアを探します。</span><span class="sxs-lookup"><span data-stu-id="cf46d-146">Explore the [adaptive card samples](http://adaptivecards.io/samples/) samples for ideas to make your activities **pop**.</span></span>  
- <span data-ttu-id="cf46d-147">[Graph エクスプローラー](https://developer.microsoft.com/en-us/graph/graph-explorer)で API を試します。</span><span class="sxs-lookup"><span data-stu-id="cf46d-147">Try the API in the [Graph Explorer](https://developer.microsoft.com/en-us/graph/graph-explorer).</span></span>

<span data-ttu-id="cf46d-148">**その他のアイデアが必要ですか ?**</span><span class="sxs-lookup"><span data-stu-id="cf46d-148">**Looking for more ideas?**</span></span> 
- <span data-ttu-id="cf46d-149">「[Microsoft エクスペリエンスはどのようにアクティビティを使用しているか](https://channel9.msdn.com/events/Build/2017/B8108)」を参照します。</span><span class="sxs-lookup"><span data-stu-id="cf46d-149">See [how Microsoft experiences are using activities](https://channel9.msdn.com/events/Build/2017/B8108).</span></span>
- <span data-ttu-id="cf46d-150">「 [アクティビティ フィード API と中断した場所の選択](https://channel9.msdn.com/Events/Windows/Windows-Developer-Day-Fall-Creators-Update/WinDev011)」を学習します。</span><span class="sxs-lookup"><span data-stu-id="cf46d-150">Learn about [the activity feed API and pick up where I left off](https://channel9.msdn.com/Events/Windows/Windows-Developer-Day-Fall-Creators-Update/WinDev011).</span></span>
