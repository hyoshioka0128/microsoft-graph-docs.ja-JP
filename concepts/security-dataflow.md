# <a name="microsoft-graph-security-data-flow"></a><span data-ttu-id="baf0a-101">Microsoft Graph Security データのフロー</span><span class="sxs-lookup"><span data-stu-id="baf0a-101">Microsoft Graph Security data flow</span></span>

<span data-ttu-id="baf0a-102">Microsoft Graph Security API は、Microsoft Graph Security エコシステムのすべてのプロバイダーに対する要求を統合します。</span><span class="sxs-lookup"><span data-stu-id="baf0a-102">The Microsoft Graph Security API federates requests to all providers in the Microsoft Graph Security ecosystem.</span></span> <span data-ttu-id="baf0a-103">以下の図に示されている通り、これはアプリケーションで提供されるセキュリティ プロバイダーの同意に基づいて行われます。</span><span class="sxs-lookup"><span data-stu-id="baf0a-103">This is based on the security provider consent provided by the application, as shown in the following diagram.</span></span> <span data-ttu-id="baf0a-104">承認ワークフローは、Microsoft 以外のプロバイダーにのみ適用されます。</span><span class="sxs-lookup"><span data-stu-id="baf0a-104">The consent workflow only applies to non-Microsoft providers.</span></span>

![security_dataflow_1.png](./images/security_dataflow_1.png)

<span data-ttu-id="baf0a-106">フローの説明は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="baf0a-106">The following is a description of the flow:</span></span>

1. <span data-ttu-id="baf0a-107">アプリケーションのユーザーは、プロバイダーのアプリケーションにサイン インしてプロバイダーの同意書を表示します。</span><span class="sxs-lookup"><span data-stu-id="baf0a-107">The application user signs in to the provider application to view the consent form from the provider.</span></span> <span data-ttu-id="baf0a-108">この同意書または UI はプロバイダーが所有し、Microsoft Graph Security API に要求を送るために、顧客から明確な同意を得る目的でのみ Microsoft 以外のプロバイダーに適用されます。</span><span class="sxs-lookup"><span data-stu-id="baf0a-108">This consent form experience or UI is owned by the provider and applies to non-Microsoft providers only to get explicit consent from their customers to send requests to Microsoft Graph Security API.</span></span>
2. <span data-ttu-id="baf0a-109">クライアントの同意は、プロバイダー側に保存されます。</span><span class="sxs-lookup"><span data-stu-id="baf0a-109">The client consent is stored on the provider side.</span></span>
3. <span data-ttu-id="baf0a-110">プロバイダーの同意サービスは、Microsoft Graph Security API を呼び出し、それぞれの顧客に同意を承認するよう通知します。</span><span class="sxs-lookup"><span data-stu-id="baf0a-110">The provider consent service calls the Microsoft Graph security API to inform consent approval for the respective customer.</span></span>
4. <span data-ttu-id="baf0a-111">このアプリケーションは、Microsoft Graph Security API に要求を送ります。</span><span class="sxs-lookup"><span data-stu-id="baf0a-111">The application sends a request to the Microsoft Graph security API.</span></span>
5. <span data-ttu-id="baf0a-112">Microsoft Graph Security API は、さまざまなプロバイダーにマッピングされているこの顧客の同意情報を確認します。</span><span class="sxs-lookup"><span data-stu-id="baf0a-112">The Microsoft Graph Security API checks for the consent information for this customer mapped to various providers.</span></span>
6. <span data-ttu-id="baf0a-113">Microsoft Graph Security API は、顧客が明確に同意に承認したすべてのプロバイダーを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="baf0a-113">The Microsoft Graph Security API calls all those providers the customer has given explicit consent to via the provider consent experience.</span></span>
7. <span data-ttu-id="baf0a-114">同意を得たすべてのプロバイダーが、同意した顧客に応答を返します。</span><span class="sxs-lookup"><span data-stu-id="baf0a-114">The response is returned from all the consented providers for that client.</span></span>
8. <span data-ttu-id="baf0a-115">アプリケーションには、結果を示す応答が返されます。</span><span class="sxs-lookup"><span data-stu-id="baf0a-115">The result set response is returned to the application.</span></span>
9. <span data-ttu-id="baf0a-116">顧客がプロバイダーの同意を承認しない場合、同意を得られなかったプロバイダーの結果は応答に含まれません。</span><span class="sxs-lookup"><span data-stu-id="baf0a-116">If the customer has not consented to any provider, no results from those providers are included in the response.</span></span>
