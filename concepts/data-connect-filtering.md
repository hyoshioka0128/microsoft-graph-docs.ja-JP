---
title: ユーザーの選択範囲と Microsoft Graph データ接続サポートのフィルター処理
description: Microsoft Graph データ接続を使用してデータを抽出し、返されたデータをフィルター処理するユーザーの選択方法について説明します。
author: tlenig
localization_priority: Priority
ms.prod: data-connect
ms.openlocfilehash: 1d558c441a626a312d0097d143d194255aaed769
ms.sourcegitcommit: b8d01acfc1cb7610a0e1f5c18065da415bae0777
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/06/2019
ms.locfileid: "33629839"
---
# <a name="user-selection-and-filtering-microsoft-graph-data-connect-supports"></a><span data-ttu-id="cc686-103">ユーザーの選択範囲と Microsoft Graph データ接続サポートのフィルター処理</span><span class="sxs-lookup"><span data-stu-id="cc686-103">User selection and filtering Microsoft Graph data connect supports</span></span>

<span data-ttu-id="cc686-104">Microsoft Graph データ接続を使用して、データを抽出するユーザーを選択し、返されるデータを制限するフィルターを追加できます。</span><span class="sxs-lookup"><span data-stu-id="cc686-104">You can use Microsoft Graph data connect to select the users that you want to extract data for, and to include filters to limit the data returned.</span></span> <span data-ttu-id="cc686-105">この記事では、データ接続が提供するユーザーの選択範囲オプションと、データ接続がサポートするフィルター処理について説明します。</span><span class="sxs-lookup"><span data-stu-id="cc686-105">This article describes the user selection options that data connect provides and the filtering that it supports.</span></span> 

## <a name="user-selection"></a><span data-ttu-id="cc686-106">ユーザーの選択範囲</span><span class="sxs-lookup"><span data-stu-id="cc686-106">User selection</span></span> 

<span data-ttu-id="cc686-107">複数のユーザーにパイプラインを実行できます。</span><span class="sxs-lookup"><span data-stu-id="cc686-107">You can run pipelines on a set of users.</span></span> <span data-ttu-id="cc686-108">ユーザーの選択範囲オプションは次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="cc686-108">The following are the options for user selection:</span></span>
- <span data-ttu-id="cc686-109">組織内のすべてのユーザー</span><span class="sxs-lookup"><span data-stu-id="cc686-109">All users within the organization</span></span>
- <span data-ttu-id="cc686-110">実行する組織内の最大 10 グループのユーザー</span><span class="sxs-lookup"><span data-stu-id="cc686-110">Up to 10 groups of users within the organization to run on</span></span> 
- <span data-ttu-id="cc686-111">Azure Active Directory のユーザー プロパティで構成される述語に基づいたユーザー</span><span class="sxs-lookup"><span data-stu-id="cc686-111">A set of users based on a predicate consisting of Azure Active Directory user properties</span></span>

<span data-ttu-id="cc686-112">Azure Data Factory のコピー アクティビティの SourceDataSet で、ユーザーの選択範囲を指定します。</span><span class="sxs-lookup"><span data-stu-id="cc686-112">Specify your user selection in the SourceDataSet of the Azure Data Factory copy activity.</span></span> <span data-ttu-id="cc686-113">グループのリストで実行するには、**typeProperties** に新規フィールド **allowedGroups** を追加し、これをコンマで区切った最大 10 グループの**オブジェクト ID** のリストに設定します。</span><span class="sxs-lookup"><span data-stu-id="cc686-113">To run on a list of groups, add a new field **allowedGroups** under **typeProperties** and set this to a list of up to 10 groups' **Object Ids** separated by commas.</span></span> <span data-ttu-id="cc686-114">既定でグループが指定されていない場合は、組織全体にデータが抽出されます。</span><span class="sxs-lookup"><span data-stu-id="cc686-114">If no groups are specified by default, data will be extracted for the entire organization.</span></span> 

<span data-ttu-id="cc686-115">テナント全体で実行する述語を指定するには、**typeProperties** に新規フィールド **userScopeFilterUri** を追加し、これを述語に設定します。</span><span class="sxs-lookup"><span data-stu-id="cc686-115">To specify a predicate to run on the entire tenant, add a new field **userScopeFilterUri** under **typeProperties** and set this to the predicate.</span></span> <span data-ttu-id="cc686-116">述語の形式は、Microsoft Graph API のクエリ形式に一致する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cc686-116">The predicate format should match the query format of Microsoft Graph APIs.</span></span> <span data-ttu-id="cc686-117">たとえば、財務部門で働いているユーザーに対して選択範囲を制限する場合は、`https://graph.microsoft.com/v1.0/users?$filter=Department eq 'Finance'`を使用できます。</span><span class="sxs-lookup"><span data-stu-id="cc686-117">For example, if you want to limit the selection to users who work in the Finance department, you can use `https://graph.microsoft.com/v1.0/users?$filter=Department eq 'Finance'`.</span></span>

<span data-ttu-id="cc686-118">クエリは、クエリを実行している Office 365 の組織内のユーザーのみを返します。</span><span class="sxs-lookup"><span data-stu-id="cc686-118">Your query will only return users within the Office 365 organization that you're querying.</span></span> <span data-ttu-id="cc686-119">ゲスト ユーザーとユーザー以外のメールボックスは返されません。</span><span class="sxs-lookup"><span data-stu-id="cc686-119">Guest users and non-user mailboxes will not be returned.</span></span>

## <a name="filtering"></a><span data-ttu-id="cc686-120">フィルター処理</span><span class="sxs-lookup"><span data-stu-id="cc686-120">Filtering</span></span> 

<span data-ttu-id="cc686-121">DateTime プロパティを使用して、クエリの抽出結果を制限できます。</span><span class="sxs-lookup"><span data-stu-id="cc686-121">You can limit the results extracted for your query using DateTime properties.</span></span> <span data-ttu-id="cc686-122">要求されたデータの種類によっては、DateTime フィルターが必要になる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="cc686-122">Depending on the type of data requested, a DateTime filter might be required.</span></span> <span data-ttu-id="cc686-123">Azure Data Factory のコピー アクティビティにおける SourceDataSet のプロパティを使用すると、DateTime フィルターが提供されます。</span><span class="sxs-lookup"><span data-stu-id="cc686-123">The DateTime filter is provided using properties in the SourceDataSet of the Azure Data Factory copy activity.</span></span> <span data-ttu-id="cc686-124">DateTime フィルターを指定するには、**typeProperties** に新規フィールド **dateFilterColumn** を追加して、これを次の表のフィルター処理をサポートするプロパティのいずれかに設定します。</span><span class="sxs-lookup"><span data-stu-id="cc686-124">To specify a DateTime filter, add a new field **dateFilterColumn** under **typeProperties** and set this to one of the properties that support filtering in the following table.</span></span> <span data-ttu-id="cc686-125">次に、**startTime** と **endTime** を追加します。これは、プロパティがフィルター処理される DateTime の値を表します。</span><span class="sxs-lookup"><span data-stu-id="cc686-125">Next, add a **startTime** and **endTime** that represent the DateTime values that the property will be filtered upon.</span></span> 

<span data-ttu-id="cc686-126">次のデータセットには、対応する DateTime プロパティのいずれかに指定するフィルターが必要です。</span><span class="sxs-lookup"><span data-stu-id="cc686-126">The following datasets require a filter to be provided on one of the corresponding DateTime properties.</span></span>

| <span data-ttu-id="cc686-127">データセット名</span><span class="sxs-lookup"><span data-stu-id="cc686-127">Dataset name</span></span>                                                   | <span data-ttu-id="cc686-128">フィルター処理をサポートしているプロパティ</span><span class="sxs-lookup"><span data-stu-id="cc686-128">Properties that support filtering</span></span>                                           | 
|----------------------------------------------------------------|-----------------------------------------------------------------------------| 
| <span data-ttu-id="cc686-129">BasicDataSet_v0.Event_v0</span><span class="sxs-lookup"><span data-stu-id="cc686-129">BasicDataSet_v0.Event_v0</span></span><br><span data-ttu-id="cc686-130">BasicDataSet_v0.Event_v1</span><span class="sxs-lookup"><span data-stu-id="cc686-130">BasicDataSet_v0.Event_v1</span></span>           | <span data-ttu-id="cc686-131">CreatedDateTime</span><span class="sxs-lookup"><span data-stu-id="cc686-131">CreatedDateTime</span></span><br><span data-ttu-id="cc686-132">LastModifiedDateTime</span><span class="sxs-lookup"><span data-stu-id="cc686-132">LastModifiedDateTime</span></span>                                     | 
| <span data-ttu-id="cc686-133">BasicDataSet_v0.Message_v0</span><span class="sxs-lookup"><span data-stu-id="cc686-133">BasicDataSet_v0.Message_v0</span></span><br><span data-ttu-id="cc686-134">BasicDataSet_v0.Message_v1</span><span class="sxs-lookup"><span data-stu-id="cc686-134">BasicDataSet_v0.Message_v1</span></span>       | <span data-ttu-id="cc686-135">CreatedDateTime</span><span class="sxs-lookup"><span data-stu-id="cc686-135">CreatedDateTime</span></span><br><span data-ttu-id="cc686-136">LastModifiedDateTime</span><span class="sxs-lookup"><span data-stu-id="cc686-136">LastModifiedDateTime</span></span><br><span data-ttu-id="cc686-137">ReceivedDateTime</span><span class="sxs-lookup"><span data-stu-id="cc686-137">ReceivedDateTime</span></span><br><span data-ttu-id="cc686-138">SentDateTime</span><span class="sxs-lookup"><span data-stu-id="cc686-138">SentDateTime</span></span> | 
| <span data-ttu-id="cc686-139">BasicDataSet_v0.SentItem_v0</span><span class="sxs-lookup"><span data-stu-id="cc686-139">BasicDataSet_v0.SentItem_v0</span></span><br><span data-ttu-id="cc686-140">BasicDataSet_v0.SentItem_v1</span><span class="sxs-lookup"><span data-stu-id="cc686-140">BasicDataSet_v0.SentItem_v1</span></span>     | <span data-ttu-id="cc686-141">CreatedDateTime</span><span class="sxs-lookup"><span data-stu-id="cc686-141">CreatedDateTime</span></span><br><span data-ttu-id="cc686-142">LastModifiedDateTime</span><span class="sxs-lookup"><span data-stu-id="cc686-142">LastModifiedDateTime</span></span><br><span data-ttu-id="cc686-143">ReceivedDateTime</span><span class="sxs-lookup"><span data-stu-id="cc686-143">ReceivedDateTime</span></span><br><span data-ttu-id="cc686-144">SentDateTime</span><span class="sxs-lookup"><span data-stu-id="cc686-144">SentDateTime</span></span> |

><span data-ttu-id="cc686-145">**注** BasicDataSet_v0.CalendarView_v0 を要求しているパイプラインにも DateTime フィルターが必要ですが、SourceDataSet に **dateFilterColumn** が指定されていません。</span><span class="sxs-lookup"><span data-stu-id="cc686-145">**Note** Pipelines requesting BasicDataSet_v0.CalendarView_v0 also require a DateTime filter, but no **dateFilterColumn** is specified in the SourceDataSet.</span></span> <span data-ttu-id="cc686-146">ただし、**startTime** と **endTime** が必要で、**startTime** の後に開始し、**endTime** が指定される前に終了するイベントのみです。</span><span class="sxs-lookup"><span data-stu-id="cc686-146">However, a **startTime** and **endTime** are required and only events that begin after the **startTime** and finish before the **endTime** are provided.</span></span>

## <a name="next-steps"></a><span data-ttu-id="cc686-147">次の手順</span><span class="sxs-lookup"><span data-stu-id="cc686-147">Next Steps</span></span> 

<span data-ttu-id="cc686-148">データ接続パイプラインで extractoin とフィルター処理に選択したユーザーの変更方法ついては、「[Azure Data Factory Office 365 コネクタ ドキュメント](https://docs.microsoft.com/ja-JP/azure/data-factory/connector-office-365)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cc686-148">For more information about how to modify the user selected for extractoin and filtering in data connect pipelines, see the [Azure Data Factory Office 365 connector documentation](https://docs.microsoft.com/ja-JP/azure/data-factory/connector-office-365).</span></span>  

  
