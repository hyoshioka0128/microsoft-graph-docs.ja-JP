# <a name="add-custom-data-to-resources-using-extensions"></a><span data-ttu-id="32373-101">拡張機能を使用してカスタム データをリソースに追加する</span><span class="sxs-lookup"><span data-stu-id="32373-101">Add custom data to resources using extensions</span></span>

<span data-ttu-id="32373-p101">Microsoft Graph は、[ユーザー](../api-reference/v1.0/resources/user.md)や[メッセージ](../api-reference/v1.0/resources/message.md)などの数多くのリソースを通じて、多用なユーザー中心のデータと分析情報にアクセスするための単一の API エンドポイントを提供しますします。独自のアプリケーション データを Microsoft Graph で拡張することもできます。外部にデータの保存を必要とせず、Microsoft Graph のリソースにカスタム プロパティを追加できます。</span><span class="sxs-lookup"><span data-stu-id="32373-p101">Microsoft Graph provides a single API endpoint that gives you access to rich people-centric data and insights through a number of resources such as user and message. There's now a way for you to  extend  Microsoft Graph with your own application data. You can add custom properties to Microsoft Graph resources without requiring an external data store.</span></span>

<span data-ttu-id="32373-105">たとえば、**ユーザー** リソースを拡張することによって、アプリを軽量に保ちながら、アプリ固有のユーザー プロファイル データを Microsoft Graph に格納できます。</span><span class="sxs-lookup"><span data-stu-id="32373-105">For example, you might decide to keep your app lightweight and store app-specific user profile data in Microsoft Graph by extending the **user** resource.</span></span> <span data-ttu-id="32373-106">または、アプリの既存のユーザー プロファイル ストアを保持し、**ユーザー** リソースにアプリ固有のストア識別子を追加することもできます。</span><span class="sxs-lookup"><span data-stu-id="32373-106">Alternatively, you might want to retain your app’s existing user profile store, and simply add an app-specific store identifier to the **user** resource.</span></span>

<span data-ttu-id="32373-p103">Microsoft Graph には、2 種類の拡張機能が備わっています。ご自分のアプリケーションの必要に最適な拡張機能の種類を選択してください。</span><span class="sxs-lookup"><span data-stu-id="32373-p103">Microsoft Graph offers two types of extensions. Choose the extension type that best suits your application needs:</span></span>

- <span data-ttu-id="32373-109">**オープン拡張機能**:開発者が使用するのに適しています。</span><span class="sxs-lookup"><span data-stu-id="32373-109">**Open extensions**: A good way for developers to get started.</span></span>
- <span data-ttu-id="32373-110">**スキーマ拡張機能**:型指定されたデータを格納すること、スキーマの検出と共有を容易にすること、フィルターを可能にすること、将来、入力データの検証と承認を可能にすることに関心のある開発者にとって、用途のより広いメカニズムとなります。</span><span class="sxs-lookup"><span data-stu-id="32373-110">**Schema extensions**: A more versatile mechanism for developers who care about storing typed data, making their schema discoverable and shareable, being able to filter, and in the future, being able to perform input data validation and authorization.</span></span>

> <span data-ttu-id="32373-111">**重要:** 拡張機能は、アカウント資格情報、政府による識別番号、カード名義人データ、財務会計データ、医療情報、機密性のある背景情報などの個人を特定できる機密情報を格納するために使用すべきではありません。</span><span class="sxs-lookup"><span data-stu-id="32373-111">**Important:** You should not use extensions to store sensitive personally identifiable information, such as account credentials, government identification numbers, cardholder data, financial account data, healthcare information, or sensitive background information.</span></span>

## <a name="supported-resources"></a><span data-ttu-id="32373-112">サポートされているリソース</span><span class="sxs-lookup"><span data-stu-id="32373-112">Supported resources</span></span>

<span data-ttu-id="32373-113">次の表は、オープン拡張機能とスキーマ拡張機能をサポートするリソースを示し、それらが一般提供 (GA - v1.0 およびベータ版エンドポイントで提供) されるようになったか、それともプレビュー段階 (ベータ版エンドポイントでのみ提供) かを示します。</span><span class="sxs-lookup"><span data-stu-id="32373-113">The following table lists the resources that support open and schema extensions, and indicates whether they have reached general availability (GA - available in both the v1.0 and beta endpoints) or are in preview (available only in the beta endpoint).</span></span>

|<span data-ttu-id="32373-114">リソース</span><span class="sxs-lookup"><span data-stu-id="32373-114">Resource</span></span> |<span data-ttu-id="32373-115">オープン拡張機能</span><span class="sxs-lookup"><span data-stu-id="32373-115">Open extensions</span></span> |<span data-ttu-id="32373-116">スキーマ拡張機能</span><span class="sxs-lookup"><span data-stu-id="32373-116">Schema extensions</span></span> |
|:------- |:------ |:------ |
| [<span data-ttu-id="32373-117">管理単位</span><span class="sxs-lookup"><span data-stu-id="32373-117">Administrative unit</span></span>](../api-reference/beta/resources/administrativeunit.md) | <span data-ttu-id="32373-118">プレビューのみ</span><span class="sxs-lookup"><span data-stu-id="32373-118">Preview only</span></span> | <span data-ttu-id="32373-119">プレビューのみ</span><span class="sxs-lookup"><span data-stu-id="32373-119">Preview only</span></span> |
| [<span data-ttu-id="32373-120">予定表イベント</span><span class="sxs-lookup"><span data-stu-id="32373-120">Calendar event</span></span>](../api-reference/v1.0/resources/event.md) | <span data-ttu-id="32373-121">GA</span><span class="sxs-lookup"><span data-stu-id="32373-121">GA</span></span> | <span data-ttu-id="32373-122">GA</span><span class="sxs-lookup"><span data-stu-id="32373-122">GA</span></span> |
| [<span data-ttu-id="32373-123">デバイス</span><span class="sxs-lookup"><span data-stu-id="32373-123">Device</span></span>](../api-reference/v1.0/resources/device.md) | <span data-ttu-id="32373-124">GA</span><span class="sxs-lookup"><span data-stu-id="32373-124">GA</span></span> | <span data-ttu-id="32373-125">GA</span><span class="sxs-lookup"><span data-stu-id="32373-125">GA</span></span> |
| [<span data-ttu-id="32373-126">グループ</span><span class="sxs-lookup"><span data-stu-id="32373-126">Group</span></span>](../api-reference/v1.0/resources/group.md) | <span data-ttu-id="32373-127">GA</span><span class="sxs-lookup"><span data-stu-id="32373-127">GA</span></span> | <span data-ttu-id="32373-128">GA</span><span class="sxs-lookup"><span data-stu-id="32373-128">GA</span></span> |
| [<span data-ttu-id="32373-129">グループ予定表イベント</span><span class="sxs-lookup"><span data-stu-id="32373-129">Group calendar event</span></span>](../api-reference/v1.0/resources/event.md) | <span data-ttu-id="32373-130">GA</span><span class="sxs-lookup"><span data-stu-id="32373-130">GA</span></span> | <span data-ttu-id="32373-131">GA</span><span class="sxs-lookup"><span data-stu-id="32373-131">GA</span></span> |
| [<span data-ttu-id="32373-132">グループ会話の投稿</span><span class="sxs-lookup"><span data-stu-id="32373-132">Group conversation post</span></span>](../api-reference/v1.0/resources/post.md) | <span data-ttu-id="32373-133">GA</span><span class="sxs-lookup"><span data-stu-id="32373-133">GA</span></span> | <span data-ttu-id="32373-134">GA</span><span class="sxs-lookup"><span data-stu-id="32373-134">GA</span></span> |
| [<span data-ttu-id="32373-135">メッセージ</span><span class="sxs-lookup"><span data-stu-id="32373-135">Message</span></span>](../api-reference/v1.0/resources/message.md) | <span data-ttu-id="32373-136">GA</span><span class="sxs-lookup"><span data-stu-id="32373-136">GA</span></span> | <span data-ttu-id="32373-137">GA</span><span class="sxs-lookup"><span data-stu-id="32373-137">GA</span></span> |
| [<span data-ttu-id="32373-138">組織</span><span class="sxs-lookup"><span data-stu-id="32373-138">Organization</span></span>](../api-reference/v1.0/resources/organization.md) | <span data-ttu-id="32373-139">GA</span><span class="sxs-lookup"><span data-stu-id="32373-139">GA</span></span> | <span data-ttu-id="32373-140">GA</span><span class="sxs-lookup"><span data-stu-id="32373-140">GA</span></span> |
| [<span data-ttu-id="32373-141">個人用連絡先</span><span class="sxs-lookup"><span data-stu-id="32373-141">Personal contact</span></span>](../api-reference/v1.0/resources/contact.md)| <span data-ttu-id="32373-142">GA</span><span class="sxs-lookup"><span data-stu-id="32373-142">GA</span></span> | <span data-ttu-id="32373-143">GA</span><span class="sxs-lookup"><span data-stu-id="32373-143">GA</span></span> |
| [<span data-ttu-id="32373-144">ユーザー</span><span class="sxs-lookup"><span data-stu-id="32373-144">User</span></span>](../api-reference/v1.0/resources/user.md) | <span data-ttu-id="32373-145">GA</span><span class="sxs-lookup"><span data-stu-id="32373-145">GA</span></span> | <span data-ttu-id="32373-146">GA</span><span class="sxs-lookup"><span data-stu-id="32373-146">GA</span></span> |

<span data-ttu-id="32373-147">職場または学校のアカウントを使用してサインインしている場合、これらすべてのリソースについて拡張機能を使用することができます。</span><span class="sxs-lookup"><span data-stu-id="32373-147">You can use extensions on all these resources when signed-in with a work or school account.</span></span> <span data-ttu-id="32373-148">また、個人用アカウントでサインインしている場合は、**イベント**、**投稿**、**グループ**、**メッセージ**、**連絡先**、**ユーザー**などのリソースで拡張機能を使用することができます。</span><span class="sxs-lookup"><span data-stu-id="32373-148">In addition, you can use extensions on these resources—**event**, **post**, **group**, **message**, **contact**, and **user**—when signed in with a personal account.</span></span>

## <a name="open-extensions"></a><span data-ttu-id="32373-149">オープン拡張機能</span><span class="sxs-lookup"><span data-stu-id="32373-149">Open extensions</span></span>

<span data-ttu-id="32373-150">[オープン拡張機能](../api-reference/v1.0/resources/opentypeextension.md) (以前の Office 365 データ拡張機能) は、[オープン タイプ](http://www.odata.org/getting-started/advanced-tutorial/#openType)であり、型指定されていないアプリ データを直接リソース インスタンスに追加するための柔軟な方法を提供します。</span><span class="sxs-lookup"><span data-stu-id="32373-150">[Open extensions](../api-reference/v1.0/resources/opentypeextension.md) (formerly known as Office 365 data extensions) are [open types](http://www.odata.org/getting-started/advanced-tutorial/#openType) that offer a flexible way to add untyped app data directly to a resource instance.</span></span>

<span data-ttu-id="32373-151">オープン拡張機能は、カスタム データとともに、リソース インスタンスの**拡張機能**ナビゲーション プロパティを介してアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="32373-151">Open extensions, together with their custom data, are accessible through the **extensions** navigation property of the resource instance.</span></span>
<span data-ttu-id="32373-152">オープン拡張機能で_事前に定義される_書き込み可能なプロパティは、**extensionName** プロパティだけです。</span><span class="sxs-lookup"><span data-stu-id="32373-152">The **extensionName** property is the only _pre-defined_, writable property in an open extension.</span></span> <span data-ttu-id="32373-153">オープン拡張機能を作成する場合、**extensionName** プロパティにテナント内で一意の名前を割り当てる必要があります。</span><span class="sxs-lookup"><span data-stu-id="32373-153">When creating an open extension, you must assign the **extensionName** property a name that is unique within the tenant.</span></span>

<span data-ttu-id="32373-154">これを行う方法の 1 つは、_独自のドメイン_に依存する逆引きドメイン ネーム システム (DNS) 形式 (例: `Com.Contoso.ContactInfo`) を使用することです。</span><span class="sxs-lookup"><span data-stu-id="32373-154">One way to do this is to use a reverse domain name system (DNS) format that is dependent on _your own domain_, for example, `Com.Contoso.ContactInfo`.</span></span>

<span data-ttu-id="32373-155">拡張機能名に Microsoft ドメイン (`Com.Microsoft` または `Com.OnMicrosoft`) を使用しないでください。</span><span class="sxs-lookup"><span data-stu-id="32373-155">Do not use the Microsoft domain (`Com.Microsoft` or `Com.OnMicrosoft`) in an extension name.</span></span>

<span data-ttu-id="32373-156">リソース インスタンスに[オープン拡張機能を作成](../api-reference/v1.0/api/opentypeextension_post_opentypeextension.md)し、すべてのカスタム データを同じ操作で保存することができます (サポートされているリソースの一部については、「[既知の制限](known_issues.md#extensions)」を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="32373-156">You can [create an open extension](../api-reference/v1.0/api/opentypeextension_post_opentypeextension.md) in a resource instance and store custom data to it all in the same operation (note [known limitation](known_issues.md#extensions) for some of the supported resources).</span></span>

<span data-ttu-id="32373-157">その後、拡張機能とそのデータの[読み取り](../api-reference/v1.0/api/opentypeextension_get.md)、[更新](../api-reference/v1.0/api/opentypeextension_update.md)、または[削除](../api-reference/v1.0/api/opentypeextension_delete.md)を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="32373-157">You can subsequently [read](../api-reference/v1.0/api/opentypeextension_get.md), [update](../api-reference/v1.0/api/opentypeextension_update.md), or [delete](../api-reference/v1.0/api/opentypeextension_delete.md) the extension and its data.</span></span>

<span data-ttu-id="32373-158">オープン拡張機能の例:[オープン拡張機能を使用したユーザーへのカスタム データの追加](extensibility_open_users.md)</span><span class="sxs-lookup"><span data-stu-id="32373-158">Open extension example: [Add custom data to users using open extensions](extensibility_open_users.md)</span></span>

## <a name="schema-extensions"></a><span data-ttu-id="32373-159">スキーマ拡張機能</span><span class="sxs-lookup"><span data-stu-id="32373-159">Schema extensions</span></span>

<span data-ttu-id="32373-p106">[スキーマ拡張機能](../api-reference/v1.0/resources/schemaextension.md)を使用すると、リソースの種類の拡張に使用するスキーマを定義できます。最初に、スキーマ拡張機能の定義を作成します。次に、それを使用して厳密に型指定されたカスタム データを含むリソース インスタンスを拡張します。さらに、スキーマ拡張機能の[状態](#schema-extensions-lifecycle)を制御し、他のアプリで検出できるようにすることができます。これらのアプリでは、そのデータの拡張機能を使用して、エクスペリエンスを拡張して構築できます。</span><span class="sxs-lookup"><span data-stu-id="32373-p106">[Schema extensions](../api-reference/v1.0/resources/schemaextension.md) allow you to define a schema that you can use to extend a resource type. First, you create your schema extension definition. Then, use it to extend resource instances with strongly-typed custom data. In addition, you can control the [status](#schema-extensions-lifecycle) of your schema extension and let it be discoverable by other apps. These apps can in turn use the extension for their data and build further experiences on top of it.</span></span>

<span data-ttu-id="32373-165">スキーマ拡張機能定義を作成する場合、その **id** の一意の名前を指定する必要があります。次の 2 つの名前付けオプションがあります。</span><span class="sxs-lookup"><span data-stu-id="32373-165">When creating a schema extension definition, you must provide a unique name for its **id**. There are two naming options:</span></span>

- <span data-ttu-id="32373-166">ご使用のテナントで検証済みのバニティ `.com`、`.net`、`.gov`、`.edu`、`.org` ドメインのいずれかが既にある場合、ドメイン名とスキーマ名を一緒に使用して一意の名前を定義できます (形式: \{_&#65279;domainName_\}\_\{_&#65279;schemaName_\})。</span><span class="sxs-lookup"><span data-stu-id="32373-166">If you already have a vanity `.com`,`.net`, `.gov`, `.edu` or a `.org` domain that you have verified with your tenant, you can use the domain name along with the schema name to define a unique name, in this format \{_&#65279;domainName_\}\_\{_&#65279;schemaName_\}.</span></span> <span data-ttu-id="32373-167">たとえば、バニティ ドメインが contoso.com の場合、**id** を `contoso_mySchema` と定義できます。</span><span class="sxs-lookup"><span data-stu-id="32373-167">For example, if your vanity domain is contoso.com, you can define an **id** of, `contoso_mySchema`.</span></span> <span data-ttu-id="32373-168">これは優先オプションです。</span><span class="sxs-lookup"><span data-stu-id="32373-168">This is the preferred option.</span></span>
- <span data-ttu-id="32373-p108">検証済みバニティ ドメインがない場合、**id** をスキーマ名 (ドメイン名のプレフィックスなし) に設定できます (例: `mySchema`)。Microsoft Graph によって、指定した名前に基づいて文字列 ID が割り当てられます (形式: ext\{_&#65279;8-random-alphanumeric-chars_\}\_\{_&#65279;schema-name_\})。例: `extkvbmkofy_mySchema`。</span><span class="sxs-lookup"><span data-stu-id="32373-p108">If you don’t have a verified vanity domain, you can just set the **id** to a schema name (without a domain name prefix), for example, `mySchema`. Microsoft Graph will assign a string ID for you based on the supplied name, in this format: ext\{_&#65279;8-random-alphanumeric-chars_\}\_\{_&#65279;schema-name_\}.  For example, `extkvbmkofy_mySchema`.</span></span>

<span data-ttu-id="32373-172">この一意の名前は、拡張リソース インスタンスにカスタム データを格納する複合型の名前として使用される **id** に示されます。</span><span class="sxs-lookup"><span data-stu-id="32373-172">You will see this unique name in **id** used as the name of the complex type that will store your custom data on the extended resource instance.</span></span>

<span data-ttu-id="32373-173">オープン拡張機能とは異なり、スキーマ拡張機能の定義 ([リスト](../api-reference/v1.0/api/schemaextension_list.md)、[作成](../api-reference/v1.0/api/schemaextension_post_schemaextensions.md)、[取得](../api-reference/v1.0/api/schemaextension_get.md)、[更新](../api-reference/v1.0/api/schemaextension_update.md)、および[削除](../api-reference/v1.0/api/schemaextension_delete.md)) とそのデータ (データの追加、取得、更新、および削除) の管理は異なるセットの API 操作になっています。</span><span class="sxs-lookup"><span data-stu-id="32373-173">Unlike open extensions, managing schema extension definitions ([list](../api-reference/v1.0/api/schemaextension_list.md), [create](../api-reference/v1.0/api/schemaextension_post_schemaextensions.md), [get](../api-reference/v1.0/api/schemaextension_get.md), [update](../api-reference/v1.0/api/schemaextension_update.md), and [delete](../api-reference/v1.0/api/schemaextension_delete.md)) and managing their data (add, get, update, and delete data) are separate sets of API operations.</span></span>

<span data-ttu-id="32373-174">スキーマ拡張機能は、対象となるリソースのインスタンスで複合型としてアクセス可能であるため、次の方法を使用してスキーマ拡張機能でカスタム データの CRUD 操作を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="32373-174">Because schema extensions are accessible as complex types in instances of the targeted resources, you can do CRUD operations on the custom data in a schema extension in the following ways:</span></span>

- <span data-ttu-id="32373-175">リソース `POST` メソッドを使用して、新しいリソース インスタンスを作成するときにカスタム データを指定できます。</span><span class="sxs-lookup"><span data-stu-id="32373-175">Use the resource `POST` method to specify custom data when creating a new resource instance.</span></span> <span data-ttu-id="32373-176">**連絡先**、**イベント**、**メッセージ**、**投稿**のリソースでは、`PATCH` 操作を使用してスキーマの拡張機能を作成する必要があるという[既知の問題](known_issues.md#creating-a-resource-instance-and-adding-schema-extension-data-at-the-same-time)があることにご注意ください。</span><span class="sxs-lookup"><span data-stu-id="32373-176">Note that there is a [known issue](known_issues.md#creating-a-resource-instance-and-adding-schema-extension-data-at-the-same-time) on the **contact**, **event**, **message**, and **post** resources that requires creating a schema extension using a `PATCH` operation.</span></span>
- <span data-ttu-id="32373-177">リソース `GET` メソッドを使用して、カスタム データを読み取ることができます。</span><span class="sxs-lookup"><span data-stu-id="32373-177">Use the resource `GET` method to read the custom data.</span></span>
- <span data-ttu-id="32373-178">リソース `PATCH` メソッドを使用して、既存のリソース インスタンスでカスタム データを追加または更新できます。</span><span class="sxs-lookup"><span data-stu-id="32373-178">Use the resource `PATCH` method to add or update custom data in an existing resource instance.</span></span>
- <span data-ttu-id="32373-179">リソース `PATCH` メソッドを使用して、複合型を null に設定し、リソース インスタンスのカスタム データを削除できます。</span><span class="sxs-lookup"><span data-stu-id="32373-179">Use the resource `PATCH` method to set the complex type to null, to delete the custom data in the resource instance.</span></span>

<span data-ttu-id="32373-180">スキーマ拡張機能の例:[スキーマ拡張機能を使用したグループへのカスタム データの追加](extensibility_schema_groups.md)</span><span class="sxs-lookup"><span data-stu-id="32373-180">Schema extension example: [Add custom data to groups using schema extensions](extensibility_schema_groups.md)</span></span>

### <a name="schema-extensions-lifecycle"></a><span data-ttu-id="32373-181">スキーマ拡張機能のライフサイクル</span><span class="sxs-lookup"><span data-stu-id="32373-181">Schema extensions lifecycle</span></span>

<span data-ttu-id="32373-182">アプリによってスキーマ拡張機能定義が作成されると、そのアプリがスキーマ拡張機能の所有者としてマークされます。</span><span class="sxs-lookup"><span data-stu-id="32373-182">When your app creates a schema extension definition, the app is marked as the owner of that schema extension.</span></span>

<span data-ttu-id="32373-p110">所有者アプリは、**ステータス** プロパティで PATCH 操作を使用して、拡張機能をさまざまな状態のライフサイクル間で移動できます。所有者アプリは現在の状態に応じて、拡張機能を更新または削除することができます。スキーマ拡張機能の更新は常に、付加的で中断を必要としない更新でなければなりません。</span><span class="sxs-lookup"><span data-stu-id="32373-p110">The owner app can move the extension through different states of a lifecycle, using a PATCH operation on its **status** property. Depending on the current state, the owner app may be able to update or delete the extension. Any updates to a schema extension should always only be additive and non-breaking.</span></span>

|<span data-ttu-id="32373-186">State</span><span class="sxs-lookup"><span data-stu-id="32373-186">State</span></span> |<span data-ttu-id="32373-187">ライフ サイクル状態の動作</span><span class="sxs-lookup"><span data-stu-id="32373-187">Lifecycle state behavior</span></span> |
|:-------------|:------------|
| <span data-ttu-id="32373-188">InDevelopment</span><span class="sxs-lookup"><span data-stu-id="32373-188">InDevelopment</span></span> | <ul><li><span data-ttu-id="32373-p111">作成後の初期状態です。所有者アプリは引き続きスキーマ拡張機能を開発しています。 </span><span class="sxs-lookup"><span data-stu-id="32373-p111">Initial state after creation. The owner app is still developing the schema extension. </span></span></li><li><span data-ttu-id="32373-191">この状態で、所有者のアプリが登録されているディレクトリと同じディレクトリにあるアプリは、このスキーマの定義を持つリソース インスタンスを拡張することができます (アプリにそのリソースへのアクセス許可がある限り)。</span><span class="sxs-lookup"><span data-stu-id="32373-191">In this state, any app in the same directory where the owner app is registered can extend resource instances with this schema definition (as long as the app has permissions to that resource).</span></span> </li><li><span data-ttu-id="32373-192">所有者アプリのみで、拡張機能の定義に追加の変更を加えて更新したり、削除したりできます。</span><span class="sxs-lookup"><span data-stu-id="32373-192">Only the owner app can update the extension definition with additive changes or delete it.</span></span> </li><li><span data-ttu-id="32373-193">所有者アプリは拡張機能を**InDevelopment** から **Available** の状態に移行できます。</span><span class="sxs-lookup"><span data-stu-id="32373-193">The owner app can move the extension from **InDevelopment** to the **Available** state.</span></span></li></ul> |
| <span data-ttu-id="32373-194">Available</span><span class="sxs-lookup"><span data-stu-id="32373-194">Available</span></span> | <ul><li><span data-ttu-id="32373-195">スキーマ拡張機能は、テナント内のすべてのアプリで利用できます。</span><span class="sxs-lookup"><span data-stu-id="32373-195">The schema extension is available for use by all apps in any tenant.</span></span> </li><li><span data-ttu-id="32373-196">所有者アプリで拡張機能を **Available** に設定した後、どのアプリでも拡張機能で指定されているこれらのリソースの種類のインスタンスにカスタム データを追加できます (アプリにそのリソースへのアクセス許可がある場合)。</span><span class="sxs-lookup"><span data-stu-id="32373-196">After the owner app sets the extension to **Available**, any app can simply add custom data to instances of those resource types specified in the extension (as long as the app has permissions to that resource).</span></span> <span data-ttu-id="32373-197">アプリは、新しいインスタンスの作成時または既存のインスタンスの更新時にカスタム データを割り当てることができます。</span><span class="sxs-lookup"><span data-stu-id="32373-197">The app can assign custom data when creating a new instance or updating an existing instance.</span></span> </li><li><span data-ttu-id="32373-198">所有者アプリのみで、拡張機能の定義に追加の変更を加えて更新することができます。</span><span class="sxs-lookup"><span data-stu-id="32373-198">Only the owner app can update the extension definition with additive changes.</span></span> <span data-ttu-id="32373-199">この状態では、どのアプリでも拡張機能の定義を削除することはできません。</span><span class="sxs-lookup"><span data-stu-id="32373-199">No app can delete the extension definition in this state.</span></span> </li><li><span data-ttu-id="32373-200">所有者アプリは、スキーマ拡張機能を **Available** から **Deprecated** 状態に移行できます。</span><span class="sxs-lookup"><span data-stu-id="32373-200">The owner app can move the schema extension from **Available** to the **Deprecated** state.</span></span></li></ul> |
| <span data-ttu-id="32373-201">Deprecated</span><span class="sxs-lookup"><span data-stu-id="32373-201">Deprecated</span></span> | <ul><li><span data-ttu-id="32373-202">スキーマ拡張機能の定義の読み取りまたは変更はできなくなります。</span><span class="sxs-lookup"><span data-stu-id="32373-202">The schema extension definition can no longer be read or modified.</span></span> </li><li><span data-ttu-id="32373-203">どのアプリも、新しいプロパティを表示、更新、追加したり、拡張機能を削除したりすることはできません。</span><span class="sxs-lookup"><span data-stu-id="32373-203">No app can view, update, add new properties, or delete the extension.</span></span> </li><li><span data-ttu-id="32373-204">ただし、既存の拡張機能の_プロパティ値_の読み取り、更新、または削除は引き続き行えます。</span><span class="sxs-lookup"><span data-stu-id="32373-204">Apps can, however, still read, update, or delete existing extension _property values_.</span></span> </li><li><span data-ttu-id="32373-205">所有者アプリは、スキーマ拡張機能を **Deprecated** から **Available** 状態に戻すことができます。</span><span class="sxs-lookup"><span data-stu-id="32373-205">The owner app can move the schema extension from **Deprecated** back to the **Available** state.</span></span></li></ul> |

### <a name="supported-property-data-types"></a><span data-ttu-id="32373-206">サポート対象のプロパティ データ型</span><span class="sxs-lookup"><span data-stu-id="32373-206">Supported property data types</span></span>

<span data-ttu-id="32373-207">スキーマ拡張機能でプロパティを定義する場合、次のデータ型がサポートされています。</span><span class="sxs-lookup"><span data-stu-id="32373-207">The following data types are supported when defining a property in a schema extension:</span></span>

| <span data-ttu-id="32373-208">プロパティの種類</span><span class="sxs-lookup"><span data-stu-id="32373-208">Property Type</span></span> | <span data-ttu-id="32373-209">注釈</span><span class="sxs-lookup"><span data-stu-id="32373-209">Remarks</span></span> |
|:-------------|:------------|
| <span data-ttu-id="32373-210">Binary</span><span class="sxs-lookup"><span data-stu-id="32373-210">Binary</span></span> | <span data-ttu-id="32373-211">最大 256 バイトです。</span><span class="sxs-lookup"><span data-stu-id="32373-211">256 bytes maximum.</span></span> |
| <span data-ttu-id="32373-212">Boolean</span><span class="sxs-lookup"><span data-stu-id="32373-212">Boolean</span></span> | <span data-ttu-id="32373-213">メッセージ、イベント、投稿ではサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="32373-213">Not supported for messages, events and posts.</span></span> |
| <span data-ttu-id="32373-214">DateTime</span><span class="sxs-lookup"><span data-stu-id="32373-214">DateTime</span></span> | <span data-ttu-id="32373-p114">ISO 8601 形式で指定する必要があります。UTC で格納されます。</span><span class="sxs-lookup"><span data-stu-id="32373-p114">Must be specified in ISO 8601 format. Will be stored in UTC.</span></span> |
| <span data-ttu-id="32373-217">整数</span><span class="sxs-lookup"><span data-stu-id="32373-217">Integer</span></span> | <span data-ttu-id="32373-p115">32 ビット値です。メッセージ、イベント、投稿ではサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="32373-p115">32-bit value. Not supported for messages, events and posts.</span></span> |
| <span data-ttu-id="32373-220">String</span><span class="sxs-lookup"><span data-stu-id="32373-220">String</span></span> | <span data-ttu-id="32373-221">最大 256 文字です。</span><span class="sxs-lookup"><span data-stu-id="32373-221">256 characters maximum.</span></span> |

> <span data-ttu-id="32373-222">**注:** 複数値プロパティはサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="32373-222">**Note:** Multi-value properties are not supported.</span></span>

### <a name="azure-ad-directory-schema-extensions"></a><span data-ttu-id="32373-223">Azure AD ディレクトリのスキーマ拡張機能</span><span class="sxs-lookup"><span data-stu-id="32373-223">Azure AD directory schema extensions</span></span>

<span data-ttu-id="32373-p116">Azure AD は、いくつかの [directoryObject](../api-reference/v1.0/resources/directoryObject.md) リソースで、[ディレクトリ スキーマ機能拡張](https://msdn.microsoft.com/ja-JP/library/azure/ad/graph/howto/azure-ad-graph-api-directory-schema-extensions)と呼ばれる、同様の拡張機能をサポートしています。[Azure AD Graph API ](https://msdn.microsoft.com/library/azure/ad/graph/api/api-catalog) を作成して、ディレクトリ スキーマ拡張機能の定義を作成および管理する必要がある場合でも、Microsoft Graph API を使用して、これらの機能拡張プロパティの_データ_を追加、取得、更新、削除することができます。</span><span class="sxs-lookup"><span data-stu-id="32373-p116">Azure AD supports a similar type of extensions, known as [directory schema extensions](https://msdn.microsoft.com/ja-JP/library/azure/ad/graph/howto/azure-ad-graph-api-directory-schema-extensions), on a few [directoryObject](../api-reference/v1.0/resources/directoryObject.md) resources. While you must use Azure AD Graph API to create and manage the definitions of directory schema extensions, you can use Microsoft Graph API to add, get, update and delete _data_ in the properties of these extensions.</span></span>

## <a name="permissions"></a><span data-ttu-id="32373-226">アクセス許可</span><span class="sxs-lookup"><span data-stu-id="32373-226">Permissions</span></span>

<span data-ttu-id="32373-227">特定のリソース上の拡張機能データに対して読み書きするには、そのリソースに対して読み書きするときに必要となるのと同じ[アクセス許可](./permissions_reference.md)が必要になります。</span><span class="sxs-lookup"><span data-stu-id="32373-227">The same [permissions](./permissions_reference.md) that are required to read from or write to a specific resource are also required to read from or write to any extensions data on that resource.</span></span> <span data-ttu-id="32373-228">たとえば、サインイン済みのユーザーのプロファイルをカスタム アプリ データで更新できるようにするには、アプリに *User.ReadWrite.All* アクセス許可を付与しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="32373-228">For example, for an app to be able to update the signed-in user's profile with custom app data, the app must have been granted the *User.ReadWrite.All* permission.</span></span>

<span data-ttu-id="32373-229">また、スキーマ拡張機能の定義を作成および管理できるようにするには、アプリケーションに *Directory.AccessAsUser.All* アクセス許可を付与しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="32373-229">Additionally, to create and manage schema extension definitions, an application must be granted the *Directory.AccessAsUser.All* permission.</span></span>

## <a name="data-limits"></a><span data-ttu-id="32373-230">データの上限</span><span class="sxs-lookup"><span data-stu-id="32373-230">Data limits</span></span>

### <a name="open-extension-limits"></a><span data-ttu-id="32373-231">オープン拡張機能の上限</span><span class="sxs-lookup"><span data-stu-id="32373-231">Open extension limits</span></span>

<span data-ttu-id="32373-232">以下に示す上限がディレクトリ リソース (**ユーザー**、**グループ**、**デバイス**など) に適用されます。</span><span class="sxs-lookup"><span data-stu-id="32373-232">The following limits apply to directory resources (such as **user**, **group**, **device**):</span></span>

- <span data-ttu-id="32373-233">オープン拡張機能のデータの上限は 2 KB (拡張機能の定義自体を含む) です。</span><span class="sxs-lookup"><span data-stu-id="32373-233">Each open extension can have up to 2 KB of data (including the extension definition itself).</span></span>
- <span data-ttu-id="32373-234">アプリケーションでは、リソース インスタンスごとに最大 2 つのオープン拡張機能を追加できます。</span><span class="sxs-lookup"><span data-stu-id="32373-234">An application can add up to two open extensions per resource instance.</span></span>

<span data-ttu-id="32373-235">以下に示す上限が Outlook のリソース (**メッセージ**、**イベント**、**連絡先**など) に適用されます。</span><span class="sxs-lookup"><span data-stu-id="32373-235">The following limits apply to Outlook resources (such as **message**, **event**, and **contact**):</span></span>

- <span data-ttu-id="32373-236">オープン拡張機能のデータは、[MAPI 名前付きプロパティ](https://msdn.microsoft.com/en-us/library/cc765864(v=office.15).aspx)に格納され、これは、ユーザーのメールボックスの限られたリソースです。</span><span class="sxs-lookup"><span data-stu-id="32373-236">Each open extension is stored in a [MAPI named property](https://msdn.microsoft.com/en-us/library/cc765864(v=office.15).aspx), which are a limited resource in a user's mailbox.</span></span> <span data-ttu-id="32373-237">詳細については、「[openTypeExtension リソースの種類](../api-reference/v1.0/resources/opentypeextension.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="32373-237">For more details, see [openTypeExtension resource type](../api-reference/v1.0/resources/opentypeextension.md).</span></span>

### <a name="schema-extension-limits"></a><span data-ttu-id="32373-238">スキーマの拡張機能の上限</span><span class="sxs-lookup"><span data-stu-id="32373-238">Schema extension limits</span></span>

<span data-ttu-id="32373-239">アプリケーションで作成できる**スキーマ拡張機能**の定義は最大 5 つです。</span><span class="sxs-lookup"><span data-stu-id="32373-239">An application may create no more than five **schema extension** definitions.</span></span>

## <a name="known-limitations"></a><span data-ttu-id="32373-240">既知の制限</span><span class="sxs-lookup"><span data-stu-id="32373-240">Known limitations</span></span>

<span data-ttu-id="32373-241">拡張機能の使用に関する既知の制限については、既知の問題に関する記事の[「拡張機能」セクション](known_issues.md#extensions)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="32373-241">For known limitations using extensions, see the [extensions section](known_issues.md#extensions) in the known issues article.</span></span>

## <a name="extension-examples"></a><span data-ttu-id="32373-242">拡張機能の例</span><span class="sxs-lookup"><span data-stu-id="32373-242">Extension examples</span></span>

- [<span data-ttu-id="32373-243">オープン拡張機能を使用したユーザーへのカスタム データの追加</span><span class="sxs-lookup"><span data-stu-id="32373-243">Add custom data to users using open extensions</span></span>](extensibility_open_users.md)

- [<span data-ttu-id="32373-244">スキーマ拡張機能を使用したグループへのカスタム データの追加</span><span class="sxs-lookup"><span data-stu-id="32373-244">Add custom data to groups using schema extensions</span></span>](extensibility_schema_groups.md)

## <a name="see-also"></a><span data-ttu-id="32373-245">関連項目</span><span class="sxs-lookup"><span data-stu-id="32373-245">See also</span></span>

- [<span data-ttu-id="32373-246">Office 365 のドメイン</span><span class="sxs-lookup"><span data-stu-id="32373-246">Office 365 domains</span></span>](https://technet.microsoft.com/ja-JP/library/office-365-domains.aspx)

- [<span data-ttu-id="32373-247">Office 365 テナントのドメインの追加および検証</span><span class="sxs-lookup"><span data-stu-id="32373-247">Adding and verifying a domain for an Office 365 tenant</span></span>](http://office365support.ca/adding-and-verifying-a-domain-for-the-new-office-365/)
